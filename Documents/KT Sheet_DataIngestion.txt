KT -
Docs -
https://github.com/jainsourabh2/GrosvenorLocation/tree/master/Documents

Environment -
----------------------------------------------------------
Hortonwork Sandbox 2.4 deployed on Azure.
2 instances - Windows SQL Server & Windows Web Server 

Windows SQL Server instance - RDP - Gvpocd01.westeurope.cloudapp.azure.com:49111
Access ambari and all big data resources from this login.


Windows Web Server - RDP - gvpocw01.westeurope.cloudapp.azure.com:49111
Deploy node APIs on this server.


Credentials to connect both environment is same -
Username : BigDataDev2
Password : M@ss!veD@ta232

Total 3 credentials to connect above environments - BigDataDev/M@ss!veD@ta23 ,  BigDataDev1/M@ss!veD@ta231, BigDataDev2/M@ss!veD@ta232.

At any given point of time 2 concurrent connections is acceptable so if already 2 people are connected to the instance one has to wait before someone drops of the connection.
Preferably use BigDataDev2 as the credential to connect the servers.
----------------------------------------------------------------------
Twitter Implementation -

Node script - 
/opt/nodeprojects/GrosvenorLocation/twitter/twitterstream.js - Main script
/opt/nodeprojects/GrosvenorLocation/twitter/jsonparsing.js -   Parser - to Parse json into flat schema
Streaming API runs continuously to fetch any tweets coming from London Region, Liverpool Region, HongKong Region and some tweetsid configured in mysql server, Also tracks tweets from all part of the world having keywords - Grosvenor, Mayfair, Belgravia and some business keywords listed in the script.

Kafka topic - newtwittercategoryflume
Flume config file - MastekTwitterCategoryAgent - Check the Flume Config in Ambari under Flume.
HDFS path - /grosvenor/twitter/newtwittercategoryflume/ 

Facebook Implementation -
----------------------------------------------------------------------------

To ingest facebook posts of configured facebook page ids in mysql table.

	Node script - /opt/nodeprojects/GrosvenorLocation/facebook/facebookgraphapi.js
	Duration : Script runs every 4 hours
	HDFS Path : /grosvenor/facebook/facebooktopic
	Post scripts : /opt/nodeprojects/GrosvenorLocation/scripts/moveFbDatewise.sh (Moves facebook posts data from current folder to datewise folder)
	Other scripts : hive partition script - /opt/nodeprojects/GrosvenorLocation/scripts/Hive_Partition.sh
	Flume agent : FacebookAgent
	Kafka Topic : fbtopics

To ingest facebook comments 

	Node script - /opt/nodeprojects/GrosvenorLocation/facebook/facebookcommentsapi.js (Facebook comments from all London based entity)
				- /opt/nodeprojects/GrosvenorLocation/facebook/facebookstroecommentapi.js (Facebook comments from all LiverpoolOne store)
	Duration : Every morning at 5 am.
	HDFS path : /grosvenor/facebook/fbcommentstopic/liverpoolone
				/grosvenor/facebook/fbcommentstopic/stores
				
To ingest LiverpoolOne FB page events :
	
	Node script : /opt/nodeprojects/GrosvenorLocation/facebook/fbEventsDetails.js
	Duration : 	Every 1 hour.
	HDFS path : /grosvenor/facebook/fbeventstopic/events/FacebookEvent.txt
	
	
				
------------------------------------------------------------------------
Twitter Implementation 

To ingest tweets from configured twitterids in mysql and to track keywords based on certain keywords.

	Node script : /opt/nodeprojects/GrosvenorLocation/twitter/twitterstream.js 
	Duration :   Runs continuously - Script  - /opt/nodeprojects/GrosvenorLocation/scripts/checkRestartTwitterStream.sh  makes sure twitter script reruns if api is closed accidently.
	HDFS path :  /grosvenor/twitter/newtwittercategoryflume/
	Post scripts : /opt/nodeprojects/GrosvenorLocation/scripts/moveFilesNewData.sh (Moves twitter data from current folder to date wise folder)
	Other scripts : hive partition script - /opt/nodeprojects/GrosvenorLocation/scripts/Hive_Partition.sh
	Flume agent : MastekTwitterCategoryAgent
	Kafka Topic : newtwittercategoryflume


Twitter Parquet script - Performance improvement for querying API on historic data
	 script : /opt/nodeprojects/GrosvenorLocation/scripts/parquescript.sh
	 Duration : Every night at 11:55pm transforms data of that month into parquet data format
	 
-------------------------------------------------------------------------
Flickr Implementation 

To ingest flickr data from London region

	Node script : /opt/nodeprojects/GrosvenorLocation/flickr/flickrsample.js
	Duration :  Every one hour scheduled
	HDFS path : /grosvenor/flickr
	
---------------------------------------------------------------------------

LiverpoolONE Datsets :
	Input source : Excel sheet with Sales,transaction,footfall records of LiverpoolOne stores - /opt/nodeprojects/GrosvenorLocation/readGrosvenorDataExcel/inputfile/GROSVENOR_PROJECT_DATA_2016.xlsx
	Nodescript : /opt/nodeprojects/GrosvenorLocation/readGrosvenorDataExcel/index.js - 	
				/opt/nodeprojects/GrosvenorLocation/readGrosvenorDataExcel/IngestAcornData.js
				/opt/nodeprojects/GrosvenorLocation/readGrosvenorDataExcel/IngestFFData.js
				/opt/nodeprojects/GrosvenorLocation/readGrosvenorDataExcel/IngestTenancyData.js
	
	HDFS Path  : /grosvenor/liverpoolone/*

LiverpoolONE Events : One time ingestion process - All Events happening around LiverpoolOne region from 1 Jan 2014 to 31 Dec 2017
	Nodescript : /opt/nodeprojects/GrosvenorLocation/readGrosvenorDataExcel/eventAPIIngestion.js				
	HDFS Path : /grosvenor/liverpoolone/EventFixture/Events.txt
----------------------------------------------------------------------------
	

Energy Dataset : 
	Utility written to ingest Energy dataset for Liverpool and London Region 
	
	https://github.com/jainsourabh2/GrosvenorLocation/blob/master/automate/ReadMe.txt
	script location : /resource1/energydataset/automate
	
	HDFS output : 	/grosvenor/DisplayEnergy
					/grosvenor/NonDomesticEnergy
					/grosvenor/DomesticEnergy_london
					/grosvenor/DomesticEnergy_liverpool
--------------------------------------------------------------------------------

HongKong Datasets :

	HK Events - One time ingestion process - All Events happening around HK region from 1 Jan 2014 to 31 Dec 2017
		Nodescript :  /opt/nodeprojects/GrosvenorLocation/readGrosvenorDataExcel/eventAPIIngestion.js
		HDFS Path :	  /grosvenor/HongKong/Events/Events_HK.txt
	
	HK Parking Info - Brings realtime parking info by calling HK govt parking vacancy api
		Nodescript : /opt/nodeprojects/GrosvenorLocation/HongKong/RealtimeParking/realtimevacancy.js
		Duration : script /opt/nodeprojects/GrosvenorLocation/scripts/realtimeParkingVacancy.sh runs every 15 mins to bring latest vacancy data.
		
	HK Property Transaction Info - Brings transaction info of properties from all HK ,Kuwloon districts by web scrapping a site.  
		Nodescript : /opt/nodeprojects/GrosvenorLocation/HongKong/PropertyTransaction/webscrapper.js
		Duration : Webscrapping script runs once a week to bring latest records into HDFS - /opt/nodeprojects/GrosvenorLocation/scripts/propertyTransaction.sh
		
	
----------------------------------------------------------------------------------------




